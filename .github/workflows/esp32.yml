on: [push]

jobs:
  esp32-test:
    runs-on: ubuntu-latest
    name: Test with ESP-IDF
    container:
      image: espressif/idf:release-v3.3
      options: --cpus 1
    steps:
      - name: check out
        uses: actions/checkout@v2
      - name: check out arduino
        uses: actions/checkout@v2
        repo: https://github.com/espressif/arduino-esp32.git
        path: arduino-esp32
      - name: pwd
        run: pwd
      - name: ls -lah
        run: ls -lah test/esp32
      - name: test
        run: make -C test/esp32
